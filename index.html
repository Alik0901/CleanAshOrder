<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <title>Order of Ash</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
    <script>
(() => {
  /* ----------  css & helpers  ---------- */
  const css = `
  #tg-log{position:fixed;left:5%;width:90%;max-height:30%;
          bottom:0;margin:0;padding:4px 6px;font:11px/1.35 monospace;
          white-space:pre-wrap;color:#0f0;background:rgba(0,0,0,.9);
          z-index:9999;overflow:auto;border-radius:4px}
  #tg-log-close{position:absolute;right:6px;top:2px;font:700 14px sans-serif;
                color:#f33;cursor:pointer}`;
  const style = Object.assign(document.createElement('style'), {textContent:css});
  document.head.append(style);

  /* ----------  log box  ---------- */
  const box  = Object.assign(document.createElement('pre'), { id:'tg-log' });
  const btn  = Object.assign(document.createElement('span'),
                 { id:'tg-log-close', textContent:'Ã—',
                   onclick:()=> box.style.display =
                     (box.style.display!=='none') ? 'none' : 'block' });
  box.append(btn); document.body.append(box);

  const show = (type, ...a) =>
    box.textContent += `[${type}] `+
      a.map(v=> typeof v==='object' ? JSON.stringify(v) : v).join(' ') + '\n';

  ['log','warn','error'].forEach(k=>{
    const orig = console[k];
    console[k] = (...a)=>{ show(k, ...a); orig(...a); };
  });
  window.addEventListener('error',   e=> show('errorEvt', e.message));
  window.addEventListener('unhandledrejection',
                          e=> show('reject', e.reason?.message||e.reason));
})();
</script>
  </body>
</html>
